–∫–æ–¥


import psycopg2
from dotenv import load_dotenv
import os

# Load environment variables
load_dotenv()

DB_HOST = os.getenv("DB_HOST")
DB_PORT = os.getenv("DB_PORT")
DB_NAME = os.getenv("DB_NAME")
DB_USER = os.getenv("DB_USER")
DB_PASSWORD = os.getenv("DB_PASSWORD")

try:
    conn = psycopg2.connect(
        host=DB_HOST,
        port=DB_PORT,
        dbname=DB_NAME,
        user=DB_USER,
        password=DB_PASSWORD,
        sslmode="require"
    )

    print("‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–µ")

    cur = conn.cursor()

    while True:
        print("\nüìö –ë–Ü–ë–õ–Ü–û–¢–ï–ö–ê")
        print("1 ‚Äì –ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ –∫–Ω–∏–≥–∏")
        print("2 ‚Äì –î–æ–¥–∞—Ç–∏ –∫–Ω–∏–≥—É")
        print("3 ‚Äì –û–Ω–æ–≤–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∏–º—ñ—Ä–Ω–∏–∫—ñ–≤")
        print("4 ‚Äì –í–∏–¥–∞–ª–∏—Ç–∏ –∫–Ω–∏–≥—É")
        print("0 ‚Äì –í–∏–π—Ç–∏")

        choice = input("‚û° –í–∏–±—ñ—Ä: ")

        if choice == "1":
            cur.execute("""
                SELECT b.book_id, b.title, a.full_name, b.copies
                FROM books b
                JOIN authors a ON b.author_id = a.author_id
                ORDER BY b.book_id
            """)
            for row in cur.fetchall():
                print(row)

        elif choice == "2":
            title = input("–ù–∞–∑–≤–∞ –∫–Ω–∏–≥–∏: ")
            author_id = input("ID –∞–≤—Ç–æ—Ä–∞: ")
            category_id = input("ID –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó: ")
            year = input("–†—ñ–∫: ")
            copies = input("–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∏–º—ñ—Ä–Ω–∏–∫—ñ–≤: ")

            cur.execute("""
                INSERT INTO books (title, author_id, category_id, year, copies)
                VALUES (%s, %s, %s, %s, %s)
            """, (title, author_id, category_id, year, copies))
            conn.commit()
            print("‚úÖ –ö–Ω–∏–≥—É –¥–æ–¥–∞–Ω–æ")

        elif choice == "3":
            book_id = input("ID –∫–Ω–∏–≥–∏: ")
            copies = input("–ù–æ–≤–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∏–º—ñ—Ä–Ω–∏–∫—ñ–≤: ")

            cur.execute("""
                UPDATE books
                SET copies = %s
                WHERE book_id = %s
            """, (copies, book_id))
            conn.commit()
            print(" –î–∞–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–æ")

        elif choice == "4":
            book_id = input("ID –∫–Ω–∏–≥–∏: ")

            cur.execute("DELETE FROM books WHERE book_id = %s", (book_id,))
            conn.commit()
            print("üóëÔ∏è –ö–Ω–∏–≥—É –≤–∏–¥–∞–ª–µ–Ω–æ")

        elif choice == "0":
            break

        else:
            print("‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π –≤–∏–±—ñ—Ä")

    cur.close()
    conn.close()
    print("üîí –ó'—î–¥–Ω–∞–Ω–Ω—è –∑–∞–∫—Ä–∏—Ç–æ")

except Exception as e:
    print("‚ùå –ü–æ–º–∏–ª–∫–∞:", e)
1


–ø–∏—Ç–∞–Ω–Ω—è
